<!-- booking.html (FULL FILE REPLACEMENT) -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Book a Slot | Evergreen</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<header>
  <div class="container header-inner">
    <div class="brand">
      <a href="index.html" aria-label="Home">
        <img src="logo.png" class="logo" alt="Evergreen logo">
      </a>
    </div>

    <nav>
      <a href="index.html">Home</a>
      <a href="services.html">Services</a>
      <a href="about.html">About</a>
      <a href="gallery.html">Gallery</a>
      <a href="booking.html" class="active">Book</a>
      <a href="contact.html">Contact</a>
    </nav>
  </div>
</header>

<main class="container page">
  <h1 class="page-title">Book a Slot</h1>
  <p class="page-sub">Pick a date & time and submit. You’ll get a WhatsApp confirmation link at the end.</p>

  <section class="card">
    <h2 class="card-title">Booking details</h2>

    <!-- IMPORTANT:
         This uses a normal POST form to Apps Script (via hidden iframe),
         so it works from GitHub Pages WITHOUT CORS headaches. -->
    <form id="bookingForm" class="form">
      <div class="grid-2">
        <label class="field">
          <span>Date</span>
          <input id="date" name="date" type="date" required />
        </label>

        <label class="field">
          <span>Time</span>
          <select id="time" name="time" required>
            <option value="09:00">09:00</option>
            <option value="10:30">10:30</option>
            <option value="12:00">12:00</option>
            <option value="13:30">13:30</option>
            <option value="15:00">15:00</option>
          </select>
          <small class="hint">We’ll tighten this into real “available slots” next.</small>
        </label>
      </div>

      <label class="field">
        <span>Job type</span>
        <select id="jobType" name="jobType" required>
          <option value="Grass cutting / lawn care">Grass cutting / lawn care</option>
          <option value="Hedge trimming">Hedge trimming</option>
          <option value="Garden tidy-up">Garden tidy-up</option>
          <option value="Clearance / waste removal">Clearance / waste removal</option>
          <option value="General outdoor maintenance">General outdoor maintenance</option>
        </select>
      </label>

      <div class="grid-2">
        <label class="field">
          <span>Name</span>
          <input id="name" name="name" type="text" placeholder="e.g. Anthony" required />
        </label>

        <label class="field">
          <span>Mobile (WhatsApp)</span>
          <input id="mobile" name="mobile" type="tel" placeholder="e.g. 07..." required />
        </label>

        <label class="field">
          <span>Postcode</span>
          <input id="postcode" name="postcode" type="text" placeholder="e.g. CF33 4PZ" required />
        </label>

        <label class="field">
          <span>Estimate (optional)</span>
          <select id="estimate" name="estimate">
            <option value="">—</option>
            <option value="Small job (up to 1 hour)">Small job (up to 1 hour)</option>
            <option value="Medium job (1–2 hours)">Medium job (1–2 hours)</option>
            <option value="Large job (2+ hours)">Large job (2+ hours)</option>
          </select>
        </label>
      </div>

      <label class="field">
        <span>Notes (optional)</span>
        <textarea id="notes" name="notes" rows="4" placeholder="Any details that help (access, parking, size, photos etc)"></textarea>
      </label>

      <!-- hidden fields that Apps Script will log -->
      <input type="hidden" id="source" name="source" value="Website" />
      <input type="hidden" id="bookingId" name="bookingId" value="" />

      <div class="actions">
        <button class="btn btn-primary" id="bookBtn" type="submit">Book now</button>
        <button class="btn btn-outline" id="clearBtn" type="button">Clear</button>
      </div>

      <div id="status" class="status"></div>

      <div id="success" class="success" hidden>
        <h3>Booked ✅</h3>
        <p>Your booking has been logged.</p>
        <p><strong>Next:</strong> tap below to confirm via WhatsApp (pre-filled message).</p>
        <a id="waLink" class="btn btn-outline full" href="#" target="_blank" rel="noopener">Confirm on WhatsApp</a>
      </div>
    </form>

    <!-- hidden iframe target to avoid CORS issues -->
    <iframe id="hiddenFrame" name="hiddenFrame" style="display:none;"></iframe>
  </section>
</main>

<script src="booking.js"></script>
</body>
</html>
